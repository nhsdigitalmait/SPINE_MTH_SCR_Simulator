# SCR Simulator rule definition file for TKW Testbench
# Richard Robinson, 23rd November 2021
# 
BEGIN RESPONSES
#Event List Query Request Responses
InvalidRequest_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/InvalidRequest_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
DuplicateMessageId_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/DuplicateMessageId_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
LogicalInconsistency_30112_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/LogicalInconsistency_30112_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
LogicalInconsistency_30134_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/LogicalInconsistency_30134_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
LogicalInconsistency_30142_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/LogicalInconsistency_30142_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
LogicalInconsistency_30307_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/LogicalInconsistency_30307_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
LogicalInconsistency_30308_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/LogicalInconsistency_30308_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
LogicalInconsistency_30317_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/LogicalInconsistency_30317_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
LogicalInconsistency_30318_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/LogicalInconsistency_30318_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
LogicalInconsistency_30333_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/LogicalInconsistency_30333_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
LogicalInconsistency_30340_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/LogicalInconsistency_30340_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
LogicalInconsistency_30344_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/LogicalInconsistency_30344_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
LogicalInconsistency_30361_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/LogicalInconsistency_30361_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
InvalidUpdate_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/InvalidUpdate_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
SystemErrorNoRetry_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/SystemErrorNoRetry_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
ServiceNotAvailable_QUPC_IN180000SM04_Response TKW_ROOT/config/SPINE_MTH_SCR_Simulator/simulator_config/Templates/ServiceNotAvailable_QUPC_IN180000SM04_Response.xml 200 urn:nhs:names:services:psisquery/QUQI_IN010000UK14
no_response class:uk.nhs.digital.mait.tkwx.tk.internalservices.rules.routingactor.NoResponse
do_process	NONE	0
END RESPONSES

BEGIN SUBSTITUTIONS
__CREATION_TIMESTAMP__ HL7datetime
__SIAB_ASID_SYSTEMPROPERTY__ Property tks.spine.my.asid
__ACKNOWLEDGED_MESSAGEID_XPATH__ Xpath //hl7:QUPC_IN180000SM04/hl7:id/@root
__ORIGINAL_SND_XPATH__ Xpath //hl7:communicationFunctionSnd/hl7:device/hl7:id/@extension
__MSGID_UUID__ UUID
END SUBSTITUTIONS

BEGIN EXPRESSIONS
#Event List Query Requests
InvalidRequest_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9160183411
DuplicateMessageId_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9051327617
LogicalInconsistency_30112_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9513987272
LogicalInconsistency_30134_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9120582366
LogicalInconsistency_30142_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9882944736
LogicalInconsistency_30307_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9942495894
LogicalInconsistency_30308_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9759113120
LogicalInconsistency_30317_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9233774856
LogicalInconsistency_30318_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9723571064
LogicalInconsistency_30333_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9886043431
LogicalInconsistency_30340_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9553094910
LogicalInconsistency_30344_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9384482226
LogicalInconsistency_30361_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9089908897
InvalidUpdate_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9466868047
SystemErrorNoRetry_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9356577838
ServiceNotAvailable_QUPC_IN180000SM04_Rule XpathEquals //hl7:QUPC_IN180000SM04/hl7:ControlActEvent/hl7:query/hl7:nHSNumber/hl7:value/@extension 9760147033
passthrough	Always
END EXPRESSIONS



#Event List Query Requests
BEGIN RULE
urn:nhs:names:services:psisquery/QUPC_IN180000SM04
if InvalidRequest_QUPC_IN180000SM04_Rule then InvalidRequest_QUPC_IN180000SM04_Response else next
if DuplicateMessageId_QUPC_IN180000SM04_Rule then DuplicateMessageId_QUPC_IN180000SM04_Response else next
if LogicalInconsistency_30112_QUPC_IN180000SM04_Rule then LogicalInconsistency_30112_QUPC_IN180000SM04_Response else next
if LogicalInconsistency_30134_QUPC_IN180000SM04_Rule then LogicalInconsistency_30134_QUPC_IN180000SM04_Response else next
if LogicalInconsistency_30142_QUPC_IN180000SM04_Rule then LogicalInconsistency_30142_QUPC_IN180000SM04_Response else next
if LogicalInconsistency_30307_QUPC_IN180000SM04_Rule then LogicalInconsistency_30307_QUPC_IN180000SM04_Response else next
if LogicalInconsistency_30308_QUPC_IN180000SM04_Rule then LogicalInconsistency_30308_QUPC_IN180000SM04_Response else next
if LogicalInconsistency_30317_QUPC_IN180000SM04_Rule then LogicalInconsistency_30317_QUPC_IN180000SM04_Response else next
if LogicalInconsistency_30318_QUPC_IN180000SM04_Rule then LogicalInconsistency_30318_QUPC_IN180000SM04_Response else next
if LogicalInconsistency_30333_QUPC_IN180000SM04_Rule then LogicalInconsistency_30333_QUPC_IN180000SM04_Response else next
if LogicalInconsistency_30340_QUPC_IN180000SM04_Rule then LogicalInconsistency_30340_QUPC_IN180000SM04_Response else next
if LogicalInconsistency_30344_QUPC_IN180000SM04_Rule then LogicalInconsistency_30344_QUPC_IN180000SM04_Response else next
if LogicalInconsistency_30361_QUPC_IN180000SM04_Rule then LogicalInconsistency_30361_QUPC_IN180000SM04_Response else next
if InvalidUpdate_QUPC_IN180000SM04_Rule then InvalidUpdate_QUPC_IN180000SM04_Response else next
if SystemErrorNoRetry_QUPC_IN180000SM04_Rule then SystemErrorNoRetry_QUPC_IN180000SM04_Response else next
if ServiceNotAvailable_QUPC_IN180000SM04_Rule then ServiceNotAvailable_QUPC_IN180000SM04_Response else next
END RULE


